function B(r){return Array.isArray?Array.isArray(r):ct(r)==="[object Array]"}function _t(r){if(typeof r=="string")return r;let t=r+"";return t=="0"&&1/r==-1/0?"-0":t}function ft(r){return r==null?"":_t(r)}function C(r){return typeof r=="string"}function st(r){return typeof r=="number"}function gt(r){return r===!0||r===!1||mt(r)&&ct(r)=="[object Boolean]"}function nt(r){return typeof r=="object"}function mt(r){return nt(r)&&r!==null}function m(r){return r!=null}function z(r){return!r.trim().length}function ct(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const At="Incorrect 'index' type",bt=r=>`Invalid value for key ${r}`,Et=r=>`Pattern length exceeds max of ${r}.`,Ct=r=>`Missing ${r} property in key`,yt=r=>`Property 'weight' in key '${r}' must be a positive integer`,Z=Object.prototype.hasOwnProperty;class Bt{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(i=>{let s=ot(i);this._keys.push(s),this._keyMap[s.id]=s,e+=s.weight}),this._keys.forEach(i=>{i.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ot(r){let t=null,e=null,i=null,s=1,n=null;if(C(r)||B(r))i=r,t=q(r),e=H(r);else{if(!Z.call(r,"name"))throw new Error(Ct("name"));const c=r.name;if(i=c,Z.call(r,"weight")&&(s=r.weight,s<=0))throw new Error(yt(c));t=q(c),e=H(c),n=r.getFn}return{path:t,id:e,weight:s,src:i,getFn:n}}function q(r){return B(r)?r:r.split(".")}function H(r){return B(r)?r.join("."):r}function Mt(r,t){let e=[],i=!1;const s=(n,c,o)=>{if(m(n))if(!c[o])e.push(n);else{let u=c[o];const a=n[u];if(!m(a))return;if(o===c.length-1&&(C(a)||st(a)||gt(a)))e.push(ft(a));else if(B(a)){i=!0;for(let l=0,d=a.length;l<d;l+=1)s(a[l],c,o+1)}else c.length&&s(a,c,o+1)}};return s(r,C(t)?t.split("."):t,0),i?e:e[0]}const Ft={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Dt={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,t)=>r.score===t.score?r.idx<t.idx?-1:1:r.score<t.score?-1:1},vt={location:0,threshold:.6,distance:100},wt={useExtendedSearch:!1,getFn:Mt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var h={...Dt,...Ft,...vt,...wt};const St=/[^ ]+/g;function It(r=1,t=3){const e=new Map,i=Math.pow(10,t);return{get(s){const n=s.match(St).length;if(e.has(n))return e.get(n);const c=1/Math.pow(n,.5*r),o=parseFloat(Math.round(c*i)/i);return e.set(n,o),o},clear(){e.clear()}}}class U{constructor({getFn:t=h.getFn,fieldNormWeight:e=h.fieldNormWeight}={}){this.norm=It(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,i)=>{this._keysMap[e.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,C(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();C(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,i=this.size();e<i;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!m(t)||z(t))return;let i={v:t,i:e,n:this.norm.get(t)};this.records.push(i)}_addObject(t,e){let i={i:e,$:{}};this.keys.forEach((s,n)=>{let c=s.getFn?s.getFn(t):this.getFn(t,s.path);if(m(c)){if(B(c)){let o=[];const u=[{nestedArrIndex:-1,value:c}];for(;u.length;){const{nestedArrIndex:a,value:l}=u.pop();if(m(l))if(C(l)&&!z(l)){let d={v:l,i:a,n:this.norm.get(l)};o.push(d)}else B(l)&&l.forEach((d,p)=>{u.push({nestedArrIndex:p,value:d})})}i.$[n]=o}else if(C(c)&&!z(c)){let o={v:c,n:this.norm.get(c)};i.$[n]=o}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function ut(r,t,{getFn:e=h.getFn,fieldNormWeight:i=h.fieldNormWeight}={}){const s=new U({getFn:e,fieldNormWeight:i});return s.setKeys(r.map(ot)),s.setSources(t),s.create(),s}function xt(r,{getFn:t=h.getFn,fieldNormWeight:e=h.fieldNormWeight}={}){const{keys:i,records:s}=r,n=new U({getFn:t,fieldNormWeight:e});return n.setKeys(i),n.setIndexRecords(s),n}function R(r,{errors:t=0,currentLocation:e=0,expectedLocation:i=0,distance:s=h.distance,ignoreLocation:n=h.ignoreLocation}={}){const c=t/r.length;if(n)return c;const o=Math.abs(i-e);return s?c+o/s:o?1:c}function kt(r=[],t=h.minMatchCharLength){let e=[],i=-1,s=-1,n=0;for(let c=r.length;n<c;n+=1){let o=r[n];o&&i===-1?i=n:!o&&i!==-1&&(s=n-1,s-i+1>=t&&e.push([i,s]),i=-1)}return r[n-1]&&n-i>=t&&e.push([i,n-1]),e}const S=32;function Lt(r,t,e,{location:i=h.location,distance:s=h.distance,threshold:n=h.threshold,findAllMatches:c=h.findAllMatches,minMatchCharLength:o=h.minMatchCharLength,includeMatches:u=h.includeMatches,ignoreLocation:a=h.ignoreLocation}={}){if(t.length>S)throw new Error(Et(S));const l=t.length,d=r.length,p=Math.max(0,Math.min(i,d));let _=n,f=p;const g=o>1||u,b=g?Array(d):[];let M;for(;(M=r.indexOf(t,f))>-1;){let A=R(t,{currentLocation:M,expectedLocation:p,distance:s,ignoreLocation:a});if(_=Math.min(A,_),f=M+l,g){let F=0;for(;F<l;)b[M+F]=1,F+=1}}f=-1;let y=[],I=1,w=l+d;const pt=1<<l-1;for(let A=0;A<l;A+=1){let F=0,D=w;for(;F<D;)R(t,{errors:A,currentLocation:p+D,expectedLocation:p,distance:s,ignoreLocation:a})<=_?F=D:w=D,D=Math.floor((w-F)/2+F);w=D;let X=Math.max(1,p-D+1),P=c?d:Math.min(p+D,d)+l,x=Array(P+2);x[P+1]=(1<<A)-1;for(let E=P;E>=X;E-=1){let L=E-1,J=e[r.charAt(L)];if(g&&(b[L]=+!!J),x[E]=(x[E+1]<<1|1)&J,A&&(x[E]|=(y[E+1]|y[E])<<1|1|y[E+1]),x[E]&pt&&(I=R(t,{errors:A,currentLocation:L,expectedLocation:p,distance:s,ignoreLocation:a}),I<=_)){if(_=I,f=L,f<=p)break;X=Math.max(1,2*p-f)}}if(R(t,{errors:A+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:a})>_)break;y=x}const N={isMatch:f>=0,score:Math.max(.001,I)};if(g){const A=kt(b,o);A.length?u&&(N.indices=A):N.isMatch=!1}return N}function Rt(r){let t={};for(let e=0,i=r.length;e<i;e+=1){const s=r.charAt(e);t[s]=(t[s]||0)|1<<i-e-1}return t}const O=String.prototype.normalize?r=>r.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):r=>r;class at{constructor(t,{location:e=h.location,threshold:i=h.threshold,distance:s=h.distance,includeMatches:n=h.includeMatches,findAllMatches:c=h.findAllMatches,minMatchCharLength:o=h.minMatchCharLength,isCaseSensitive:u=h.isCaseSensitive,ignoreDiacritics:a=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){if(this.options={location:e,threshold:i,distance:s,includeMatches:n,findAllMatches:c,minMatchCharLength:o,isCaseSensitive:u,ignoreDiacritics:a,ignoreLocation:l},t=u?t:t.toLowerCase(),t=a?O(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const d=(_,f)=>{this.chunks.push({pattern:_,alphabet:Rt(_),startIndex:f})},p=this.pattern.length;if(p>S){let _=0;const f=p%S,g=p-f;for(;_<g;)d(this.pattern.substr(_,S),_),_+=S;if(f){const b=p-S;d(this.pattern.substr(b),b)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,ignoreDiacritics:i,includeMatches:s}=this.options;if(t=e?t:t.toLowerCase(),t=i?O(t):t,this.pattern===t){let g={isMatch:!0,score:0};return s&&(g.indices=[[0,t.length-1]]),g}const{location:n,distance:c,threshold:o,findAllMatches:u,minMatchCharLength:a,ignoreLocation:l}=this.options;let d=[],p=0,_=!1;this.chunks.forEach(({pattern:g,alphabet:b,startIndex:M})=>{const{isMatch:y,score:I,indices:w}=Lt(t,g,b,{location:n+M,distance:c,threshold:o,findAllMatches:u,minMatchCharLength:a,includeMatches:s,ignoreLocation:l});y&&(_=!0),p+=I,y&&w&&(d=[...d,...w])});let f={isMatch:_,score:_?p/this.chunks.length:1};return _&&s&&(f.indices=d),f}}class v{constructor(t){this.pattern=t}static isMultiMatch(t){return tt(t,this.multiRegex)}static isSingleMatch(t){return tt(t,this.singleRegex)}search(){}}function tt(r,t){const e=r.match(t);return e?e[1]:null}class Tt extends v{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class Ot extends v{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const i=t.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class $t extends v{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class Nt extends v{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class Pt extends v{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class zt extends v{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class lt extends v{constructor(t,{location:e=h.location,threshold:i=h.threshold,distance:s=h.distance,includeMatches:n=h.includeMatches,findAllMatches:c=h.findAllMatches,minMatchCharLength:o=h.minMatchCharLength,isCaseSensitive:u=h.isCaseSensitive,ignoreDiacritics:a=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){super(t),this._bitapSearch=new at(t,{location:e,threshold:i,distance:s,includeMatches:n,findAllMatches:c,minMatchCharLength:o,isCaseSensitive:u,ignoreDiacritics:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class ht extends v{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,i;const s=[],n=this.pattern.length;for(;(i=t.indexOf(this.pattern,e))>-1;)e=i+n,s.push([i,e-1]);const c=!!s.length;return{isMatch:c,score:c?0:1,indices:s}}}const W=[Tt,ht,$t,Nt,zt,Pt,Ot,lt],et=W.length,jt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Kt="|";function Ht(r,t={}){return r.split(Kt).map(e=>{let i=e.trim().split(jt).filter(n=>n&&!!n.trim()),s=[];for(let n=0,c=i.length;n<c;n+=1){const o=i[n];let u=!1,a=-1;for(;!u&&++a<et;){const l=W[a];let d=l.isMultiMatch(o);d&&(s.push(new l(d,t)),u=!0)}if(!u)for(a=-1;++a<et;){const l=W[a];let d=l.isSingleMatch(o);if(d){s.push(new l(d,t));break}}}return s})}const Wt=new Set([lt.type,ht.type]);class Vt{constructor(t,{isCaseSensitive:e=h.isCaseSensitive,ignoreDiacritics:i=h.ignoreDiacritics,includeMatches:s=h.includeMatches,minMatchCharLength:n=h.minMatchCharLength,ignoreLocation:c=h.ignoreLocation,findAllMatches:o=h.findAllMatches,location:u=h.location,threshold:a=h.threshold,distance:l=h.distance}={}){this.query=null,this.options={isCaseSensitive:e,ignoreDiacritics:i,includeMatches:s,minMatchCharLength:n,findAllMatches:o,ignoreLocation:c,location:u,threshold:a,distance:l},t=e?t:t.toLowerCase(),t=i?O(t):t,this.pattern=t,this.query=Ht(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:s,ignoreDiacritics:n}=this.options;t=s?t:t.toLowerCase(),t=n?O(t):t;let c=0,o=[],u=0;for(let a=0,l=e.length;a<l;a+=1){const d=e[a];o.length=0,c=0;for(let p=0,_=d.length;p<_;p+=1){const f=d[p],{isMatch:g,indices:b,score:M}=f.search(t);if(g){if(c+=1,u+=M,i){const y=f.constructor.type;Wt.has(y)?o=[...o,...b]:o.push(b)}}else{u=0,c=0,o.length=0;break}}if(c){let p={isMatch:!0,score:u/c};return i&&(p.indices=o),p}}return{isMatch:!1,score:1}}}const V=[];function Gt(...r){V.push(...r)}function G(r,t){for(let e=0,i=V.length;e<i;e+=1){let s=V[e];if(s.condition(r,t))return new s(r,t)}return new at(r,t)}const $={AND:"$and",OR:"$or"},Y={PATH:"$path",PATTERN:"$val"},Q=r=>!!(r[$.AND]||r[$.OR]),Yt=r=>!!r[Y.PATH],Qt=r=>!B(r)&&nt(r)&&!Q(r),rt=r=>({[$.AND]:Object.keys(r).map(t=>({[t]:r[t]}))});function dt(r,t,{auto:e=!0}={}){const i=s=>{let n=Object.keys(s);const c=Yt(s);if(!c&&n.length>1&&!Q(s))return i(rt(s));if(Qt(s)){const u=c?s[Y.PATH]:n[0],a=c?s[Y.PATTERN]:s[u];if(!C(a))throw new Error(bt(u));const l={keyId:H(u),pattern:a};return e&&(l.searcher=G(a,t)),l}let o={children:[],operator:n[0]};return n.forEach(u=>{const a=s[u];B(a)&&a.forEach(l=>{o.children.push(i(l))})}),o};return Q(r)||(r=rt(r)),i(r)}function Ut(r,{ignoreFieldNorm:t=h.ignoreFieldNorm}){r.forEach(e=>{let i=1;e.matches.forEach(({key:s,norm:n,score:c})=>{const o=s?s.weight:null;i*=Math.pow(c===0&&o?Number.EPSILON:c,(o||1)*(t?1:n))}),e.score=i})}function Xt(r,t){const e=r.matches;t.matches=[],m(e)&&e.forEach(i=>{if(!m(i.indices)||!i.indices.length)return;const{indices:s,value:n}=i;let c={indices:s,value:n};i.key&&(c.key=i.key.src),i.idx>-1&&(c.refIndex=i.idx),t.matches.push(c)})}function Jt(r,t){t.score=r.score}function Zt(r,t,{includeMatches:e=h.includeMatches,includeScore:i=h.includeScore}={}){const s=[];return e&&s.push(Xt),i&&s.push(Jt),r.map(n=>{const{idx:c}=n,o={item:t[c],refIndex:c};return s.length&&s.forEach(u=>{u(n,o)}),o})}class k{constructor(t,e={},i){this.options={...h,...e},this.options.useExtendedSearch,this._keyStore=new Bt(this.options.keys),this.setCollection(t,i)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof U))throw new Error(At);this._myIndex=e||ut(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){m(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let i=0,s=this._docs.length;i<s;i+=1){const n=this._docs[i];t(n,i)&&(this.removeAt(i),i-=1,s-=1,e.push(n))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:n,sortFn:c,ignoreFieldNorm:o}=this.options;let u=C(t)?C(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ut(u,{ignoreFieldNorm:o}),n&&u.sort(c),st(e)&&e>-1&&(u=u.slice(0,e)),Zt(u,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(t){const e=G(t,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:n,i:c,n:o})=>{if(!m(n))return;const{isMatch:u,score:a,indices:l}=e.searchIn(n);u&&s.push({item:n,idx:c,matches:[{score:a,value:n,norm:o,indices:l}]})}),s}_searchLogical(t){const e=dt(t,this.options),i=(o,u,a)=>{if(!o.children){const{keyId:d,searcher:p}=o,_=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(u,d),searcher:p});return _&&_.length?[{idx:a,item:u,matches:_}]:[]}const l=[];for(let d=0,p=o.children.length;d<p;d+=1){const _=o.children[d],f=i(_,u,a);if(f.length)l.push(...f);else if(o.operator===$.AND)return[]}return l},s=this._myIndex.records,n={},c=[];return s.forEach(({$:o,i:u})=>{if(m(o)){let a=i(e,o,u);a.length&&(n[u]||(n[u]={idx:u,item:o,matches:[]},c.push(n[u])),a.forEach(({matches:l})=>{n[u].matches.push(...l)}))}}),c}_searchObjectList(t){const e=G(t,this.options),{keys:i,records:s}=this._myIndex,n=[];return s.forEach(({$:c,i:o})=>{if(!m(c))return;let u=[];i.forEach((a,l)=>{u.push(...this._findMatches({key:a,value:c[l],searcher:e}))}),u.length&&n.push({idx:o,item:c,matches:u})}),n}_findMatches({key:t,value:e,searcher:i}){if(!m(e))return[];let s=[];if(B(e))e.forEach(({v:n,i:c,n:o})=>{if(!m(n))return;const{isMatch:u,score:a,indices:l}=i.searchIn(n);u&&s.push({score:a,key:t,value:n,idx:c,norm:o,indices:l})});else{const{v:n,n:c}=e,{isMatch:o,score:u,indices:a}=i.searchIn(n);o&&s.push({score:u,key:t,value:n,norm:c,indices:a})}return s}}k.version="7.1.0";k.createIndex=ut;k.parseIndex=xt;k.config=h;k.parseQuery=dt;Gt(Vt);const qt=[{id:"coup_001",code:"SAVE20",merchant_id:"amazon",discount_type:"percentage",discount_value:20,description:"20% off your entire order",success_rate:.92,last_verified_ts:17088768e5,minimum_purchase:50,categories:["electronics","books"]},{id:"coup_002",code:"FREESHIP50",merchant_id:"amazon",discount_type:"free_shipping",discount_value:0,description:"Free shipping on orders over $50",success_rate:.98,last_verified_ts:17089632e5,minimum_purchase:50},{id:"coup_003",code:"TECH15OFF",merchant_id:"bestbuy",discount_type:"percentage",discount_value:15,description:"15% off tech accessories",success_rate:.87,last_verified_ts:17087904e5,categories:["electronics","accessories"]},{id:"coup_004",code:"STUDENT10",merchant_id:"amazon",discount_type:"percentage",discount_value:10,description:"10% student discount",success_rate:.75,last_verified_ts:1708704e6},{id:"coup_005",code:"BOGO50",merchant_id:"target",discount_type:"bogo",discount_value:50,description:"Buy one get one 50% off",success_rate:.89,last_verified_ts:17088768e5,categories:["clothing","home"]},{id:"coup_006",code:"FLASH25",merchant_id:"walmart",discount_type:"percentage",discount_value:25,description:"Flash sale - 25% off",success_rate:.65,last_verified_ts:17086176e5,expires_at:17090496e5},{id:"coup_007",code:"SAVE5FLAT",merchant_id:"ebay",discount_type:"fixed",discount_value:5,description:"$5 off any purchase",success_rate:.94,last_verified_ts:17089632e5,minimum_purchase:25},{id:"coup_008",code:"NEWYEAR30",merchant_id:"target",discount_type:"percentage",discount_value:30,description:"New Year special - 30% off",success_rate:.45,last_verified_ts:17085312e5,expires_at:17067456e5},{id:"coup_009",code:"MEMBER15",merchant_id:"bestbuy",discount_type:"percentage",discount_value:15,description:"Members get 15% off",success_rate:.82,last_verified_ts:17087904e5},{id:"coup_010",code:"TOOLS20",merchant_id:"homedepot",discount_type:"percentage",discount_value:20,description:"20% off power tools",success_rate:.78,last_verified_ts:1708704e6,categories:["tools","hardware"]}],te=[{id:"prod_001",name:"Wireless Noise-Canceling Headphones",price:249.99,original_price:299.99,rating:4.5,review_count:1250,categories:["electronics","audio","headphones"],merchant_id:"amazon",description:"Premium over-ear headphones with active noise cancellation"},{id:"prod_002",name:"Smart 4K TV - 55 inch",price:599.99,original_price:799.99,rating:4.3,review_count:890,categories:["electronics","tv","smart-home"],merchant_id:"bestbuy",description:"Ultra HD Smart TV with HDR and streaming apps"},{id:"prod_003",name:"Instant Pot Duo 7-in-1",price:79.99,rating:4.6,review_count:5430,categories:["kitchen","appliances","cooking"],merchant_id:"amazon",description:"Multi-use programmable pressure cooker"},{id:"prod_004",name:"Cordless Drill Set",price:129.99,original_price:169.99,rating:4.4,review_count:720,categories:["tools","power-tools","hardware"],merchant_id:"homedepot",description:"20V MAX Cordless Drill with 2 batteries and charger"},{id:"prod_005",name:"Yoga Mat - Extra Thick",price:29.99,rating:4.7,review_count:2100,categories:["sports","fitness","yoga"],merchant_id:"target",description:"Non-slip exercise mat with carrying strap"},{id:"prod_006",name:"Coffee Maker with Grinder",price:149.99,original_price:199.99,rating:4.2,review_count:450,categories:["kitchen","appliances","coffee"],merchant_id:"walmart",description:"Automatic coffee maker with built-in burr grinder"},{id:"prod_007",name:"Gaming Laptop - RTX 4060",price:1299.99,original_price:1499.99,rating:4.5,review_count:320,categories:["electronics","computers","gaming"],merchant_id:"bestbuy",description:"High-performance gaming laptop with RTX graphics"},{id:"prod_008",name:"Air Fryer - 6 Quart",price:89.99,rating:4.4,review_count:1890,categories:["kitchen","appliances","cooking"],merchant_id:"target",description:"Digital air fryer with 8 preset cooking programs"},{id:"prod_009",name:"Security Camera System",price:299.99,original_price:399.99,rating:4.3,review_count:560,categories:["electronics","security","smart-home"],merchant_id:"amazon",description:"4-camera wireless security system with night vision"},{id:"prod_010",name:"Electric Lawn Mower",price:249.99,rating:4.1,review_count:410,categories:["outdoor","lawn-care","tools"],merchant_id:"lowes",description:"Cordless electric lawn mower with 21-inch cutting deck"}],ee=[{contributor_id:"contrib_001",reputation:95,rank_badge:"platinum",total_verifications:1250,success_rate:.94},{contributor_id:"contrib_002",reputation:88,rank_badge:"gold",total_verifications:780,success_rate:.89},{contributor_id:"contrib_003",reputation:72,rank_badge:"silver",total_verifications:450,success_rate:.85},{contributor_id:"contrib_004",reputation:98,rank_badge:"platinum",total_verifications:2100,success_rate:.96},{contributor_id:"contrib_005",reputation:65,rank_badge:"silver",total_verifications:320,success_rate:.82},{contributor_id:"contrib_006",reputation:45,rank_badge:"bronze",total_verifications:120,success_rate:.75},{contributor_id:"contrib_007",reputation:82,rank_badge:"gold",total_verifications:650,success_rate:.88},{contributor_id:"contrib_008",reputation:91,rank_badge:"platinum",total_verifications:1450,success_rate:.92},{contributor_id:"contrib_009",reputation:58,rank_badge:"bronze",total_verifications:210,success_rate:.78},{contributor_id:"contrib_010",reputation:76,rank_badge:"silver",total_verifications:520,success_rate:.86},{contributor_id:"contrib_011",reputation:93,rank_badge:"platinum",total_verifications:1780,success_rate:.95},{contributor_id:"contrib_012",reputation:69,rank_badge:"silver",total_verifications:380,success_rate:.83},{contributor_id:"contrib_013",reputation:52,rank_badge:"bronze",total_verifications:150,success_rate:.76},{contributor_id:"contrib_014",reputation:87,rank_badge:"gold",total_verifications:890,success_rate:.9},{contributor_id:"contrib_015",reputation:79,rank_badge:"gold",total_verifications:620,success_rate:.87},{contributor_id:"contrib_016",reputation:96,rank_badge:"platinum",total_verifications:2450,success_rate:.97},{contributor_id:"contrib_017",reputation:61,rank_badge:"silver",total_verifications:280,success_rate:.8},{contributor_id:"contrib_018",reputation:73,rank_badge:"silver",total_verifications:490,success_rate:.84},{contributor_id:"contrib_019",reputation:84,rank_badge:"gold",total_verifications:750,success_rate:.89},{contributor_id:"contrib_020",reputation:41,rank_badge:"bronze",total_verifications:95,success_rate:.72},{contributor_id:"contrib_021",reputation:77,rank_badge:"silver",total_verifications:560,success_rate:.86},{contributor_id:"contrib_022",reputation:90,rank_badge:"platinum",total_verifications:1320,success_rate:.93},{contributor_id:"contrib_023",reputation:55,rank_badge:"bronze",total_verifications:180,success_rate:.77},{contributor_id:"contrib_024",reputation:81,rank_badge:"gold",total_verifications:690,success_rate:.88},{contributor_id:"contrib_025",reputation:99,rank_badge:"platinum",total_verifications:3200,success_rate:.98}],re=[{domain:"amazon.com",selectors:{priceElement:".a-price-whole, .a-price-range",couponInput:"#spc-gcpromoinput",applyButton:"#gcApplyButtonId",cartTotal:".sc-subtotal-amount-buybox"}},{domain:"bestbuy.com",selectors:{priceElement:".pricing-price__regular-price, .priceView-hero-price",couponInput:"#cartApp input[name='promoCode']",applyButton:".promo-code__submit-btn",cartTotal:".order-summary__price"}},{domain:"target.com",selectors:{priceElement:"[data-test='product-price']",couponInput:"#promoCodeEntry",applyButton:"[data-test='apply-promo-code-button']",cartTotal:"[data-test='cart-summary-value']"}},{domain:"walmart.com",selectors:{priceElement:".price-main .price-characteristic",couponInput:"input[name='promoCode']",applyButton:"button[data-automation-id='promo-apply-button']",cartTotal:".cart-total-value"}},{domain:"ebay.com",selectors:{priceElement:".x-price-primary, .vi-VR-cvipPrice",couponInput:"#redemptionCode",applyButton:"#redemptionSubmit",cartTotal:".total-row .val"}},{domain:"homedepot.com",selectors:{priceElement:".price-format__main-price",couponInput:"#promoInput",applyButton:"#promoApplyButton",cartTotal:".checkout__total-price"}},{domain:"lowes.com",selectors:{priceElement:".main-price",couponInput:"#promo-code-input",applyButton:"#promo-apply-btn",cartTotal:".order-total-value"}},{domain:"wayfair.com",selectors:{priceElement:".SFPrice",couponInput:"#PromoCodeInput",applyButton:"#PromoApplyButton",cartTotal:".CartSummary-total"}}],j=qt,T=te,it=ee,K=re,ie=new k(T,{keys:["name","description","categories"],threshold:.4,includeScore:!0});class ne{static getCoupons(t){return j.filter(e=>e.merchant_id===t||e.merchant_id===this.extractMerchantId(t))}static getAllCoupons(){return[...j]}static getCouponById(t){return j.find(e=>e.id===t)}static searchProducts(t,e=10){return ie.search(t,{limit:e}).map(s=>s.item)}static getProductById(t){return T.find(e=>e.id===t)}static getProductsByCategory(t){return T.filter(e=>e.categories.some(i=>i.toLowerCase().includes(t.toLowerCase())))}static getAllProducts(){return[...T]}static getContributor(t){return it.find(e=>e.contributor_id===t)}static getTopContributors(t=10){return[...it].sort((e,i)=>i.reputation-e.reputation).slice(0,t)}static getSiteConfig(t){return K.find(e=>t.includes(e.domain)||e.domain.includes(t))}static isSiteSupported(t){return K.some(e=>t.includes(e.domain)||e.domain.includes(t))}static getAllSupportedSites(){return[...K]}static extractMerchantId(t){const e=t.match(/(?:www\.)?([^.]+)\./);return e?e[1].toLowerCase():t.toLowerCase()}static async simulateApiDelay(t=300){return new Promise(e=>setTimeout(e,t))}static getMerchantHash(t){let e=0;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);e=(e<<5)-e+s,e=e&e}return Math.abs(e).toString(16)}}export{ne as M};
